<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/sles4sap/ipaddr2.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='../style.css' />
</head>

<body>



<ul id="index"><li><a href="../index.html"><i>&lt;= Back to file list</i></a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a>
    <ul>
      <li><a href="#ipaddr2_azure_resource_group">ipaddr2_azure_resource_group</a></li>
      <li><a href="#ipaddr2_azure_deployment">ipaddr2_azure_deployment</a></li>
      <li><a href="#ipaddr2_ssh_cmd">ipaddr2_ssh_cmd</a></li>
      <li><a href="#ipaddr2_destroy">ipaddr2_destroy</a></li>
    </ul>
  </li>
</ul><h1>lib/sles4sap/ipaddr2.pm</h1>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>Library to manage ipaddr2 tests</p>

<h2 id="ipaddr2_azure_resource_group">ipaddr2_azure_resource_group</h2>

<pre><code>my $rg = ipaddr2_azure_resource_group();</code></pre>

<p>Get the Azure resource group name for this test</p>

<h2 id="ipaddr2_azure_deployment">ipaddr2_azure_deployment</h2>

<pre><code>my $rg = ipaddr2_azure_deployment();</code></pre>

<p>Create a deployment in Azure designed for this specific test.</p>

<p>1. Create a resource group to contain all 2. Create a vnet and subnet in it 3. Create one Public IP 4. Create 2 VM to run the cluster, both running a webserver and that are behind the LB 5. Create 1 additional VM that get 6. Create a Load Balancer with 2 VM in backend and with an IP as frontend</p>

<dl>

<dt id="region---existing-resource-group"><b>region</b> - existing resource group</dt>
<dd>

</dd>
<dt id="os---existing-Load-balancer-NAME"><b>os</b> - existing Load balancer NAME</dt>
<dd>

</dd>
</dl>

<h2 id="ipaddr2_ssh_cmd">ipaddr2_ssh_cmd</h2>

<pre><code>script_run(ipaddr2_ssh_cmd() . &#39; whoami&#39;);</code></pre>

<p>Create ssh command that target the only VM in the deployment that has public IP.</p>

<h2 id="ipaddr2_destroy">ipaddr2_destroy</h2>

<pre><code>ipaddr2_destroy();</code></pre>

<p>Destroy the deployment by deleting the resource group</p>


</body>

</html>


